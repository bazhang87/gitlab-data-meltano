version: 1
send_anonymous_usage_stats: true
project_id: 60140d5b-32f1-49b1-aa37-e7a48dd2ec43
plugins:
  extractors:
  - name: tap-xactly
    namespace: tap_xactly
    pip_url: git+https://gitlab.com/gitlab-data/meltano_taps.git#subdirectory=tap-xactly
    executable: tap-xactly
    capabilities:
    - catalog
    - discover
    - state
    settings:
    - name: user
    - name: password
    - name: client_id
    - name: consumer
  - name: tap-zengrc
    namespace: tap_zengrc
    pip_url: git+https://gitlab.com/gitlab-data/tap-zengrc
    executable: tap-zengrc
    capabilities:
    - discover
    settings:
    - name: base_url
    - name: username
    - name: password
    config:
      base_url: https://gitlab.api.zengrc.com/api/v2
      username: $ZENGRC_USERNAME
      password: $ZENGRC_PASSWORD
  - name: tap-adaptive
    namespace: tap_adaptive
    pip_url: git+https://gitlab.com/gitlab-data/meltano_taps.git#subdirectory=tap-adaptive
    executable: tap-adaptive
    capabilities:
     - catalog
     - discover
     - state
    settings:
     - name: username
     - name: password
       kind: password
     - name: start_date
       value: '2010-01-01T00:00:00Z'
    config:
      start_date: '2010-01-01T00:00:00Z'
      username: $TAP_ADAPTIVE_USERNAME
      password: $TAP_ADAPTIVE_PASSWORD
  - name: tap-edcast
    namespace: tap_edcast
    pip_url: git+https://gitlab.com/gitlab-data/meltano_taps.git#subdirectory=tap-edcast
    executable: tap-edcast
    capabilities:
     - catalog
     - discover
     - state
    settings:
    - name: username
      kind: string
    - name: password
      kind: password
    - name: start_date
      value: '1900-01-01T00:00:00Z'
    - name: end_date
      value: '2030-01-01T00:00:00Z'
    - name: url_base
      value: 'https://api.domo.com'
    config:
      username: $TAP_EDCAST_USERNAME
      password: $TAP_EDCAST_PASSWORD
      start_date: $TAP_EDCAST_START_DATE
      end_date: $TAP_EDCAST_END_DATE
      url_base: $TAP_EDCAST_URL_BASE
  - name: tap-zendesk
    variant: twilio-labs
    pip_url: git+https://github.com/twilio-labs/twilio-tap-zendesk
    executable: tap-zendesk
    capabilities:
    - discover
    settings:
    - name: email
    - name: start_date
    - name: subdomain
    - name: api_token
    metadata:
    '*':
      replication-method: INCREMENTAL
    '*':
      replication-key: created_at
      created_at:
        is-replication-key: true
      primary-keys: ["ID"]
    config:
      email: $TAP_ZENDESK_EMAIL
      start_date: $TAP_ZENDESK_START_DATE
      subdomain: $TAP_ZENDESK_SUBDOMAIN
      api_token: $TAP_ZENDESK_API_TOKEN
    select:
    - groups.* #all groups columns
    - '!groups.description' # except column description
    - '!groups.default' # and column default
    - group_memberships.* 
    - macros.*
    - '!macros.restriction.*' # all macros table columns, except the ones fitting this pattern
    - organizations.created_at
    - organizations.deleted_at
    - organizations.details
    - organizations.domain_names
    - organizations.external_id
    - organizations.group_id
    - organizations.id
    - organizations.name
    - organizations.notes
    - organizations.organization_fields
    - organizations.shared_comments
    - organizations.shared_tickets
    - organizations.tags
    - organizations.updated_at
    - organizations.url
    - satisfaction_ratings.* â‰ˆ
    - sla_policies.*
    - '!sla_policies.filter.*'
    - tags.*
    - ticket_audits.author_id
    - ticket_audits.created_at
    - ticket_audits.events
    - ticket_audits.id
    - ticket_audits.metadata
    - ticket_audits.ticket_id
    - ticket_audits.via
    - ticket_comments.*
    - '!ticket_comments.metadata.*'
    - '!ticket_comments.via.*'
    - ticket_fields.*
    - ticket_forms.*
    - ticket_metrics.*
    - '!ticket_metrics.*.business'
    - '!ticket_metrics.*.calendar'
    - tickets.*
    - '!tickets.satisfaction_rating.*'
    - '!tickets.via.*'
    - users.*
    - '!users.iana_time_zone'
    - '!users.photo.*'
    - '!users.user_fields.*'
    metadata:
      '*':
        replication-method: FULL_TABLE
  loaders:
  - name: target-snowflake
    variant: meltano
    pip_url: git+https://gitlab.com/meltano/target-snowflake
    config:
      account: gitlab
      database: RAW
      warehouse: LOADING
      role: MELTANO
  - name: target-snowflake--edcast
    variant: meltano
    inherit_from: target-snowflake
    pip_url: git+https://gitlab.com/gitlab-data/edcast-target-snowflake
    config:
      account: gitlab
      database: RAW
      warehouse: LOADING
      role: MELTANO
      username: $TARGET_EDCAST_SNOWFLAKE_USERNAME
      password: $TARGET_EDCAST_SNOWFLAKE_PASSWORD
  orchestrators:
  - name: airflow
    pip_url: psycopg2 apache-airflow==1.10.13 --constraint https://raw.githubusercontent.com/apache/airflow/constraints-1.10.13/constraints-3.8.txt
  files:
  - name: airflow
    pip_url: git+https://gitlab.com/meltano/files-airflow.git
schedules:
- name: xactly-to-snowflake
  extractor: tap-xactly
  loader: target-snowflake--edcast
  transform: skip
  interval: '@daily'
  start_date: 2021-07-13
- name: zengrc-to-snowflake
  extractor: tap-zengrc
  loader: target-snowflake--edcast
  transform: skip
  interval: '@daily'
  start_date: 2021-07-13
- name: adaptive-to-snowflake
  extractor: tap-adaptive
  loader: target-snowflake--edcast
  transform: skip
  interval: '@daily'
  start_date: 2021-10-01
- name: edcast-to-snowflake
  extractor: tap-edcast
  loader: target-snowflake--edcast
  transform: skip
  interval: '0 7 * * *'
  start_date: 2021-12-01
- name: zendesk-to-snowflake
  extractor: tap-zendesk
  loader: target-snowflake--edcast
  transform: skip
  interval: '0 4 * * *'
  start_date: 2012-12-30 00:00:00

